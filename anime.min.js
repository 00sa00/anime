/*
 2017 Julian Garnier
 Released under the MIT license
*/
(function(a,h){"function"===typeof define&&define.amd?define([],h):"object"===typeof module&&module.exports?module.exports=h():a.anime=h()})(this,function(){function a(b){try{return document.querySelectorAll(b)}catch(e){}}function h(b,e){for(var a=b.length,d=2<=arguments.length?arguments[1]:void 0,n=[],c=0;c<a;c++)if(c in b){var f=b[c];e.call(d,f,c,b)&&n.push(f)}return n}function c(b){return b.reduce(function(b,a){return b.concat(m.arr(a)?c(a):a)},[])}function g(b){if(m.arr(b))return b;m.str(b)&&
(b=a(b)||b);return b instanceof NodeList||b instanceof HTMLCollection?[].slice.call(b):[b]}function p(b,e){return b.some(function(b){return b===e})}function r(b){var e={},a;for(a in b)e[a]=b[a];return e}function z(b,e){var a=r(b),d;for(d in b)a[d]=e.hasOwnProperty(d)?e[d]:b[d];return a}function f(b,e){var a=r(b),d;for(d in e)a[d]=m.und(b[d])?e[d]:b[d];return a}function X(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(b,a,e,l){return a+a+e+e+l+l});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);
b=parseInt(e[1],16);var a=parseInt(e[2],16);e=parseInt(e[3],16);return"rgba("+b+","+a+","+e+",1)"}function K(b){function a(b,a,e){0>e&&(e+=1);1<e&&--e;return e<1/6?b+6*(a-b)*e:.5>e?a:e<2/3?b+(a-b)*(2/3-e)*6:b}var l=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(b);b=parseInt(l[1],10)/360;var d=parseInt(l[2],10)/100,n=parseInt(l[3],10)/100;l=l[4]||1;if(0==d)n=d=b=n;else{var c=.5>n?n*(1+d):n+d-n*d,f=2*n-c;n=a(f,c,b+1/3);d=a(f,c,b);b=a(f,
c,b-1/3)}return"rgba("+255*n+","+255*d+","+255*b+","+l+")"}function x(b){if(b=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(b))return b[2]}function E(b,a){return m.fnc(b)?b(a.target,a.id,a.total):b}function L(b,a){if(a in b.style)return b.style[a]||getComputedStyle(b).getPropertyValue(a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function F(b,a){if(m.dom(b)&&p(Y,a))return"transform";if(m.dom(b)&&(b.getAttribute(a)||m.svg(b)&&b[a]))return"attribute";
if(m.dom(b)&&"transform"!==a&&L(b,a))return"css";if(null!=b[a])return"object"}function M(b){if(m.dom(b)){b=b.style.transform||"";for(var a=/(\w+)\(([^)]*)\)/g,l=new Map,d;d=a.exec(b);)l.set(d[1],d[2]);return l}}function G(b,a,l){switch(F(b,a)){case "transform":if(-1<a.indexOf("scale"))var e=1;else e=-1<a.indexOf("translate")||"perspective"===a?"px":-1<a.indexOf("rotate")||-1<a.indexOf("skew")?"deg":void 0,e=0+e;b=M(b).get(a)||e;l.transforms.list.set(a,b);l.transforms.first||(l.transforms.first=a);
l.transforms.last=a;return b;case "css":return L(b,a);case "attribute":return b.getAttribute(a);default:return b[a]||0}}function H(b,a){var e=/^(\*=|\+=|-=)/.exec(b);if(!e)return b;var d=x(b)||0;a=parseFloat(a);b=parseFloat(b.replace(e[0],""));switch(e[0][0]){case "+":return a+b+d;case "-":return a-b+d;case "*":return a*b+d}}function N(b,a){if(m.col(b))return b=m.rgb(b)?(a=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(b))?"rgba("+a[1]+",1)":b:m.hex(b)?X(b):m.hsl(b)?K(b):void 0,b;var e=x(b);e=e?b.substr(0,
b.length-e.length):b;return a&&!/\s/g.test(b)?e+a:e}function I(b,a){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))}function O(b){b=b.points;for(var a=0,l,d=0;d<b.numberOfItems;d++){var n=b.getItem(d);0<d&&(a+=I(l,n));l=n}return a}function P(b){if(b.getTotalLength)return b.getTotalLength();switch(b.tagName.toLowerCase()){case "circle":return 2*Math.PI*b.getAttribute("r");case "rect":return 2*b.getAttribute("width")+2*b.getAttribute("height");case "line":return I({x:b.getAttribute("x1"),
y:b.getAttribute("y1")},{x:b.getAttribute("x2"),y:b.getAttribute("y2")});case "polyline":return O(b);case "polygon":var a=b.points;return O(b)+I(a.getItem(a.numberOfItems-1),a.getItem(0))}}function Z(b,a){function e(e){e=void 0===e?0:e;return b.el.getPointAtLength(1<=a+e?a+e:0)}var d=e(),n=e(-1),c=e(1);switch(b.property){case "x":return d.x;case "y":return d.y;case "angle":return 180*Math.atan2(c.y-n.y,c.x-n.x)/Math.PI}}function Q(b,a){var e=/-?\d*\.?\d+/g,d=N(m.pth(b)?b.totalLength:b,a)+"";return{original:d,
numbers:d.match(e)?d.match(e).map(Number):[0],strings:m.str(b)||a?d.split(e):[]}}function R(b){b=b?c(m.arr(b)?b.map(g):g(b)):[];return h(b,function(b,a,d){return d.indexOf(b)===a})}function S(b){var a=R(b);return a.map(function(b,e){return{target:b,id:e,total:a.length,transforms:{list:M(b)}}})}function aa(b,a){var e=r(a);if(m.arr(b)){var d=b.length;2!==d||m.obj(b[0])?m.fnc(a.duration)||(e.duration=a.duration/d):b={value:b}}return(m.arr(b)?b:[b]).map(function(b,e){e=e?0:a.delay;b=m.obj(b)&&!m.pth(b)?
b:{value:b};m.und(b.delay)&&(b.delay=e);return b}).map(function(b){return f(b,e)})}function ba(b,a){var e={},d;for(d in b){var c=E(b[d],a);m.arr(c)&&(c=c.map(function(b){return E(b,a)}),1===c.length&&(c=c[0]));e[d]=c}e.duration=parseFloat(e.duration);e.delay=parseFloat(e.delay);return e}function ca(b){return m.arr(b)?A.apply(this,b):T[b]}function da(b,a){var e;return b.tweens.map(function(d){d=ba(d,a);var c=d.value,l=G(a.target,b.name,a),f=e?e.to.original:l;f=m.arr(c)?c[0]:f;var h=H(m.arr(c)?c[1]:
c,f);l=x(h)||x(f)||x(l);d.from=Q(f,l);d.to=Q(h,l);d.start=e?e.end:b.offset;d.end=d.start+d.delay+d.duration+d.endDelay;d.easing=ca(d.easing);d.elasticity=(1E3-Math.min(Math.max(d.elasticity,1),999))/1E3;d.isPath=m.pth(c);d.isColor=m.col(d.from.original);d.isColor&&(d.round=1);return e=d})}function ea(b,a){return h(c(b.map(function(b){return a.map(function(a){var e=F(b.target,a.name);if(e){var d=da(a,b);a={type:e,property:a.name,animatable:b,tweens:d,duration:d[d.length-1].end,delay:d[0].delay}}else a=
void 0;return a})})),function(b){return!m.und(b)})}function U(b,a,c,d){var e="delay"===b;return a.length?(e?Math.min:Math.max).apply(Math,a.map(function(a){return a[b]})):e?d.delay:c.timeOffset+d.delay+d.duration}function fa(b){var a=z(ha,b),c=z(V,b),d=S(b.targets),n=[],h=f(a,c),g;for(g in b)h.hasOwnProperty(g)||"targets"===g||n.push({name:g,offset:h.timeOffset,tweens:aa(b[g],c)});b=ea(d,n);return f(a,{children:[],animatables:d,animations:b,duration:U("duration",b,a,c),delay:U("delay",b,a,c)})}function q(b){function a(){return window.Promise&&
new Promise(function(b){return r=b})}function c(){k.reversed=!k.reversed;k.children.forEach(function(b){return b.reversed=k.reversed})}function d(b){return k.reversed?k.duration-b:b}function f(b){for(var a=0,e=k.animations,d=e.length;a<d;){var c=e[a],f=c.animatable,l=c.tweens,n=l.length-1,g=l[n];n&&(g=h(l,function(a){return b<a.end})[0]||g);l=Math.min(Math.max(b-g.start-g.delay,0),g.duration)/g.duration;var m=isNaN(l)?1:g.easing(l,g.elasticity);l=g.to.strings;var u=g.round;n=[];var t=void 0;t=g.to.numbers.length;
for(var p=0;p<t;p++){var y=void 0;y=g.to.numbers[p];var v=g.from.numbers[p];y=g.isPath?Z(g.value,m*y):v+m*(y-v);u&&(g.isColor&&2<p||(y=Math.round(y*u)/u));n.push(y)}if(g=l.length)for(t=l[0],m=0;m<g;m++)u=l[m+1],p=n[m],isNaN(p)||(t=u?t+(p+u):t+(p+" "));else t=n[0];W[c.type](f.target,c.property,t,f.transforms,k.reversed);c.currentValue=t;a++}k.currentTime=b;k.progress=b/k.duration*100}function g(b){if(k[b])k[b](k)}function m(){k.remaining&&!0!==k.remaining&&k.remaining--}function t(b,e){var l=k.duration,
n=k.timeOffset,h=n+k.delay,t=k.currentTime,y=k.reversed,v=d(b);if(k.children.length){var q=k.children,J=q.length;if(!e||v>=k.currentTime)for(e=0;e<J;e++)q[e].seek(v);else for(;J--;)q[J].seek(v)}if(v>=h||!l)k.began||(k.began=!0,g("begin")),g("run");if(v>n&&v<l)f(v);else if(v<=n&&0!==t&&(f(0),y&&m()),v>=l&&t!==l||!l)f(l),y||m();g("update");b>=l&&(k.remaining?(u=p,"alternate"===k.direction&&c()):(k.paused=!0,k.completed||(k.completed=!0,g("complete"),"Promise"in window&&(r(),x=a()))),B=0)}b=void 0===
b?{}:b;var p,u,B=0,r=null,x=a(),k=fa(b);k.reset=function(){var b=k.direction,a=k.loop;k.currentTime=0;k.progress=0;k.paused=!0;k.began=!1;k.completed=!1;k.reversed="reverse"===b;k.remaining="alternate"===b&&1===a?2:a;f(0);for(b=k.children.length;b--;)k.children[b].reset()};k.tick=function(b){p=b;u||(u=p);t((B+p-u)*q.speed)};k.seek=function(b){t(d(b),!0)};k.pause=function(){k.paused=!0;var b=w.indexOf(k);-1<b&&w.splice(b,1)};k.play=function(){k.paused&&(k.paused=!1,u=0,B=d(k.currentTime),w.push(k),
C||ia())};k.reverse=function(){c();u=0;B=d(k.currentTime)};k.restart=function(){k.pause();k.reset();k.play()};k.finished=x;k.reset();k.autoplay&&k.play();return k}var ha={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,timeOffset:0},V={duration:1E3,delay:0,endDelay:0,easing:"easeOutElastic",elasticity:500,round:0},Y="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skew skewX skewY perspective".split(" "),m={arr:function(b){return Array.isArray(b)},
obj:function(b){return-1<Object.prototype.toString.call(b).indexOf("Object")},pth:function(b){return m.obj(b)&&b.hasOwnProperty("totalLength")},svg:function(b){return b instanceof SVGElement},dom:function(b){return b.nodeType||m.svg(b)},str:function(b){return"string"===typeof b},fnc:function(b){return"function"===typeof b},und:function(b){return"undefined"===typeof b},hex:function(b){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(b)},rgb:function(b){return/^rgb/.test(b)},hsl:function(b){return/^hsl/.test(b)},
col:function(b){return m.hex(b)||m.rgb(b)||m.hsl(b)}},A=function(){function b(b,a,d){return(((1-3*d+3*a)*b+(3*d-6*a))*b+3*a)*b}return function(a,c,d,f){if(0<=a&&1>=a&&0<=d&&1>=d){var e=new Float32Array(11);if(a!==c||d!==f)for(var l=0;11>l;++l)e[l]=b(.1*l,a,d);return function(l){if(a===c&&d===f)return l;if(0===l)return 0;if(1===l)return 1;for(var g=0,n=1;10!==n&&e[n]<=l;++n)g+=.1;--n;n=g+(l-e[n])/(e[n+1]-e[n])*.1;var h=3*(1-3*d+3*a)*n*n+2*(3*d-6*a)*n+3*a;if(.001<=h){for(g=0;4>g;++g){h=3*(1-3*d+3*a)*
n*n+2*(3*d-6*a)*n+3*a;if(0===h)break;var m=b(n,a,d)-l;n-=m/h}l=n}else if(0===h)l=n;else{n=g;g+=.1;var p=0;do m=n+(g-n)/2,h=b(m,a,d)-l,0<h?g=m:n=m;while(1e-7<Math.abs(h)&&10>++p);l=m}return b(l,c,f)}}}}(),T=function(){function b(b,a){return 0===b||1===b?b:-Math.pow(2,10*(b-1))*Math.sin(2*(b-1-a/(2*Math.PI)*Math.asin(1))*Math.PI/a)}var a="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),c={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],
[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],b],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(a,e){return 1-b(1-a,e)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(a,e){return.5>a?b(2*a,e)/2:1-b(-2*a+2,e)/2}]},d={linear:A(.25,.25,.75,.75)},f={},g;for(g in c)f.type=g,c[f.type].forEach(function(b){return function(e,
c){d["ease"+b.type+a[c]]=m.fnc(e)?e:A.apply(this,e)}}(f)),f={type:f.type};return d}(),W={css:function(b,a,c){return b.style[a]=c},attribute:function(b,a,c){return b.setAttribute(a,c)},object:function(b,a,c){return b[a]=c},transform:function(b,a,c,d,f,g){d.list.set(a,c);if(a===d.last||g){a="";for(c=d.next();!c.done;c=d.next()),c=f.next().value,f=f.next().value,a+=c+"("+f+") ";b.style.transform=a}}},w=[],D=[],C=0,ia=function(){function b(){C=
requestAnimationFrame(a)}function a(a){D.length&&(w=h(w,function(a){return!D.includes(a)}),D=[]);if(w.length){for(var c=0;c<w.length;){var e=w[c];e.paused?D.push(e):w[c].tick(a);c++}b()}else cancelAnimationFrame(C),C=0}return b}();q.version="3.0.0";q.speed=1;q.running=w;q.remove=function(a){a=R(a);for(var b=w.length;b--;)for(var c=w[b],d=c.animations,f=d.length;f--;)p(a,d[f].animatable.target)&&(d.splice(f,1),d.length||c.pause())};q.get=G;q.set=function(a,c){S(a).forEach(function(a){for(var b in c){var e=
c[b],f=G(a.target,b,a),g=x(e)||x(f);e=H(N(e,g),f);f=F(a.target,b);W[f](a.target,b,e,a.transforms,!1,!0)}})};q.path=function(b,c){var e=m.str(b)?a(b)[0]:b,d=c||100;return function(a){return{el:e,property:a,totalLength:P(e)*(d/100)}}};q.setDashoffset=function(a){var b=P(a);a.setAttribute("stroke-dasharray",b);return b};q.bezier=A;q.easings=T;q.timeline=function(a){a=void 0===a?{}:a;var b=q(a);b.pause();b.duration=0;b.add=function(c,d){b.children.forEach(function(a){a.began=!0;a.completed=!0});var e=
f(c,z(V,a));e.targets=e.targets||a.targets;c=b.duration;e.autoplay=!1;e.direction=b.direction;e.timeOffset=m.und(d)?c:H(d,c);b.began=!0;b.completed=!0;b.seek(e.timeOffset);d=q(e);d.began=!0;d.completed=!0;d.duration>c&&(b.duration=d.duration);b.children.push(d);b.seek(0);b.reset();b.autoplay&&b.restart();return b};return b};q.random=function(a,c){return Math.floor(Math.random()*(c-a+1))+a};return q});