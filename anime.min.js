/*
 2017 Julian Garnier
 Released under the MIT license
*/
(function(x,v){"function"===typeof define&&define.amd?define([],v):"object"===typeof module&&module.exports?module.exports=v():x.anime=v()})(this,function(){function x(a){return(a=/\(([^)]+)\)/.exec(a))?a[1].split(",").map(function(a){return parseFloat(a)}):[]}function v(a,b){function d(a){var c=b?b*a/1E3:a;c=1>k?Math.exp(-c*k*q)*(1*Math.cos(r*c)+m*Math.sin(r*c)):(1+m*c)*Math.exp(-c*q);return 0===a||1===a?a:1-c}function c(){if(y[a])return y[a];for(var b=1/6,c=0,e=0;;)if(c+=b,1===d(c)){if(e++,16<=
e)break}else e=0;y[a]=c*b*1E3;return y[a]}var e=x(a),h=f.und(e[0])?1:e[0],l=f.und(e[1])?100:e[1],n=f.und(e[2])?10:e[2];e=f.und(e[3])?0:e[3];var q=Math.sqrt(l/h),k=n/(2*Math.sqrt(l*h)),r=1>k?q*Math.sqrt(1-k*k):0,m=1>k?(k*q+-e)/r:-e+q;return b?d:c}function z(a,b){a=void 0===a?1:a;b=void 0===b?.5:b;return function(d){var c=Math.max(a,1);return 0===d||1===d?d:-c*Math.pow(2,10*(d-1))*Math.sin(2*(d-1-b/(2*Math.PI)*Math.asin(1/c))*Math.PI/b)}}function aa(a){a=void 0===a?10:a;return function(b){return 1/
a*Math.round(b*a)}}function ba(a){var b=a.easing,d=b.split("(")[0],c=x(b),e=H[d];switch(d){case "spring":return v(b,a.duration);case "cubicBezier":return I.apply(null,c);case "steps":return aa.apply(null,c);default:return f.fnc(e)?e.apply(null,c):I.apply(null,e)}}function J(a){try{return document.querySelectorAll(a)}catch(b){}}function C(a,b){for(var d=a.length,c=2<=arguments.length?arguments[1]:void 0,e=[],h=0;h<d;h++)if(h in a){var l=a[h];b.call(c,l,h,a)&&e.push(l)}return e}function D(a){return a.reduce(function(a,
d){return a.concat(f.arr(d)?D(d):d)},[])}function K(a){if(f.arr(a))return a;f.str(a)&&(a=J(a)||a);return a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a]}function L(a,b){return a.some(function(a){return a===b})}function E(a){var b={},d;for(d in a)b[d]=a[d];return b}function F(a,b){var d=E(a),c;for(c in a)d[c]=b.hasOwnProperty(c)?b[c]:a[c];return d}function A(a,b){var d=E(a),c;for(c in b)d[c]=f.und(a[c])?b[c]:a[c];return d}function ca(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,
function(a,b,d,l){return b+b+d+d+l+l});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);a=parseInt(b[1],16);var d=parseInt(b[2],16);b=parseInt(b[3],16);return"rgba("+a+","+d+","+b+",1)"}function da(a){function b(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a);a=parseInt(d[1],10)/360;var c=parseInt(d[2],10)/100,e=parseInt(d[3],10)/100;
d=d[4]||1;if(0==c)e=c=a=e;else{var h=.5>e?e*(1+c):e+c-e*c,l=2*e-h;e=b(l,h,a+1/3);c=b(l,h,a);a=b(l,h,a-1/3)}return"rgba("+255*e+","+255*c+","+255*a+","+d+")"}function w(a){if(a=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a))return a[2]}function M(a,b){return f.fnc(a)?a(b.target,b.id,b.total):a}function N(a,b){if(b in a.style)return a.style[b]||getComputedStyle(a).getPropertyValue(b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function O(a,b){if(f.dom(a)&&
(a.getAttribute(b)||f.svg(a)&&a[b]))return"attribute";if(f.dom(a)&&L(ea,b))return"transform";if(f.dom(a)&&"transform"!==b&&N(a,b))return"css";if(null!=a[b])return"object"}function P(a){if(f.dom(a)){a=a.style.transform||"";for(var b=/(\w+)\(([^)]*)\)/g,d=new Map,c;c=b.exec(a);)d.set(c[1],c[2]);return d}}function Q(a,b,d){switch(O(a,b)){case "transform":if(-1<b.indexOf("scale"))var c=1;else c=-1<b.indexOf("translate")||"perspective"===b?"px":-1<b.indexOf("rotate")||-1<b.indexOf("skew")?"deg":void 0,
c=0+c;a=P(a).get(b)||c;d.transforms.list.set(b,a);d.transforms.last=b;return a;case "css":return N(a,b);case "attribute":return a.getAttribute(b);default:return a[b]||0}}function R(a,b){var d=/^(\*=|\+=|-=)/.exec(a);if(!d)return a;var c=w(a)||0;b=parseFloat(b);a=parseFloat(a.replace(d[0],""));switch(d[0][0]){case "+":return b+a+c;case "-":return b-a+c;case "*":return b*a+c}}function G(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))}function S(a){a=a.points;for(var b=0,d,c=0;c<a.numberOfItems;c++){var e=
a.getItem(c);0<c&&(b+=G(d,e));d=e}return b}function T(a){if(a.getTotalLength)return a.getTotalLength();switch(a.tagName.toLowerCase()){case "circle":return 2*Math.PI*a.getAttribute("r");case "rect":return 2*a.getAttribute("width")+2*a.getAttribute("height");case "line":return G({x:a.getAttribute("x1"),y:a.getAttribute("y1")},{x:a.getAttribute("x2"),y:a.getAttribute("y2")});case "polyline":return S(a);case "polygon":var b=a.points;return S(a)+G(b.getItem(b.numberOfItems-1),b.getItem(0))}}function fa(a,
b){function d(c){c=void 0===c?0:c;return a.el.getPointAtLength(1<=b+c?b+c:0)}var c=d(),e=d(-1),h=d(1);switch(a.property){case "x":return c.x;case "y":return c.y;case "angle":return 180*Math.atan2(h.y-e.y,h.x-e.x)/Math.PI}}function U(a,b){var d=/-?\d*\.?\d+/g;var c=f.pth(a)?a.totalLength:a;if(f.col(c))if(f.rgb(c)){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(c);c=e?"rgba("+e[1]+",1)":c}else c=f.hex(c)?ca(c):f.hsl(c)?da(c):void 0;else e=(e=w(c))?c.substr(0,c.length-e.length):c,c=b&&!/\s/g.test(c)?e+
b:e;c+="";return{original:c,numbers:c.match(d)?c.match(d).map(Number):[0],strings:f.str(a)||b?c.split(d):[]}}function V(a){a=a?D(f.arr(a)?a.map(K):K(a)):[];return C(a,function(a,d,c){return c.indexOf(a)===d})}function ha(a){var b=V(a);return b.map(function(a,c){return{target:a,id:c,total:b.length,transforms:{list:P(a)}}})}function ia(a,b){var d=E(b);/^spring/.test(d.easing)&&(d.duration=v(d.easing));if(f.arr(a)){var c=a.length;2!==c||f.obj(a[0])?f.fnc(b.duration)||(d.duration=b.duration/c):a={value:a}}return(f.arr(a)?
a:[a]).map(function(a,c){a=f.obj(a)&&!f.pth(a)?a:{value:a};f.und(a.delay)&&(a.delay=c?0:b.delay);return a}).map(function(a){return A(a,d)})}function ja(a,b){var d={},c;for(c in a){var e=M(a[c],b);f.arr(e)&&(e=e.map(function(a){return M(a,b)}),1===e.length&&(e=e[0]));d[c]=e}d.duration=parseFloat(d.duration);d.delay=parseFloat(d.delay);return d}function ka(a,b){var d;return a.tweens.map(function(c){c=ja(c,b);var e=c.value,h=Q(b.target,a.name,b),l=d?d.to.original:h;l=f.arr(e)?e[0]:l;var n=R(f.arr(e)?
e[1]:e,l);h=w(n)||w(l)||w(h);c.from=U(l,h);c.to=U(n,h);c.start=d?d.end:0;c.end=c.start+c.delay+c.duration+c.endDelay;c.easing=ba(c);c.isPath=f.pth(e);c.isColor=f.col(c.from.original);c.isColor&&(c.round=1);return d=c})}function la(a,b){return C(D(a.map(function(a){return b.map(function(c){var b=O(a.target,c.name);if(b){var d=ka(c,a);c={type:b,property:c.name,animatable:a,tweens:d,duration:d[d.length-1].end,delay:d[0].delay}}else c=void 0;return c})})),function(a){return!f.und(a)})}function W(a,b,
d){var c="delay"===a;return b.length?(c?Math.min:Math.max).apply(Math,b.map(function(b){return b[a]})):c?d.delay:d.delay+d.duration}function ma(a){var b=F(na,a),d=F(X,a),c=ha(a.targets),e=[],h;for(h in a)b.hasOwnProperty(h)||d.hasOwnProperty(h)||"targets"===h||e.push({name:h,tweens:ia(a[h],d)});e=la(c,e);return A(b,{states:{default:a},children:[],animatables:c,animations:e,duration:W("duration",e,d),delay:W("delay",e,d)})}function p(a){function b(){return window.Promise&&new Promise(function(a){return w=
a})}function d(){g.reversed=!g.reversed;m.forEach(function(a){return a.reversed=g.reversed})}function c(a){return g.reversed?g.duration-a:a}function e(a){for(var b=0,c=g.animations,d=c.length;b<d;){var e=c[b],h=e.animatable,f=e.tweens,l=f.length-1,k=f[l];l&&(k=C(f,function(b){return a<b.end})[0]||k);f=Math.min(Math.max(a-k.start-k.delay,0),k.duration)/k.duration;var n=isNaN(f)?1:k.easing(f);f=k.to.strings;var t=k.round;l=[];var q=k.to.numbers.length,m=void 0;for(m=0;m<q;m++){var r=void 0;r=k.to.numbers[m];
var p=k.from.numbers[m];r=k.isPath?fa(k.value,n*r):p+n*(r-p);t&&(k.isColor&&2<m||(r=Math.round(r*t)/t));l.push(r)}if(k=f.length)for(m=f[0],n=0;n<k;n++)t=f[n+1],q=l[n],isNaN(q)||(m=t?m+(q+t):m+(q+" "));else m=l[0];oa[e.type](h.target,e.property,m,h.transforms);e.currentValue=m;b++}g.currentTime=a;g.progress=a/g.duration*100}function h(a){if(g[a])g[a](g)}function f(){g.remaining&&!0!==g.remaining&&g.remaining--}function n(a){var l=g.duration,n=g.delay,t=c(a);if(m)if(t>=g.currentTime)for(var p=0;p<v;p++)m[p].seek(t-
m[p].timelineOffset);else for(p=v;p--;)m[p].seek(t-m[p].timelineOffset);if(t>=n||!l)g.began||(g.began=!0,h("begin")),h("run");if(t>n&&t<l)e(t);else if(t<=n&&0!==g.currentTime&&(e(0),g.reversed&&f()),t>=l&&g.currentTime!==l||!l)e(l),g.reversed||f();h("update");a>=l&&(k=0,g.remaining?(q=r,"alternate"===g.direction&&d()):(g.paused=!0,g.completed||(g.completed=!0,h("complete"),"Promise"in window&&(w(),x=b()))))}a=void 0===a?{}:a;var q=0,k=0,r=0,m,v=0,w=null,x=b(),g=ma(a);g.reset=function(){var a=g.direction,
b=g.loop;g.currentTime=0;g.progress=0;g.paused=!0;g.began=!1;g.completed=!1;g.reversed="reverse"===a;g.remaining="alternate"===a&&1===b?2:b;m=g.children;for(a=v=m.length;a--;)g.children[a].reset();e(0)};g.tick=function(a){r=a;q||(q=r);n((r+(k-q))*p.speed)};g.seek=function(a){n(c(a))};g.pause=function(){g.paused=!0};g.play=function(){g.paused&&(g.paused=!1,q=0,k=c(g.currentTime),u.push(g),B||pa())};g.reverse=function(){d();q=0;k=c(g.currentTime)};g.restart=function(){g.pause();g.reset();g.play()};
g.goTo=function(a,b){a=A(g.states[a],g.states.default);a=p(a);a.play();b&&a.seek(a.duration)};g.switchTo=function(a){g.goTo(a,!0)};g.finished=x;g.reset();g.startTime&&n(g.startTime-g.duration*Math.floor(g.startTime/g.duration));g.autoplay&&g.animations.length&&g.play();return g}function Y(a,b){for(var d=b.length;d--;)L(a,b[d].animatable.target)&&b.splice(d,1)}var na={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,startTime:0,timelineOffset:0},X={duration:1E3,
delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},ea="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skew skewX skewY perspective".split(" "),f={arr:function(a){return Array.isArray(a)},obj:function(a){return-1<Object.prototype.toString.call(a).indexOf("Object")},pth:function(a){return f.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},dom:function(a){return a.nodeType||f.svg(a)},str:function(a){return"string"===
typeof a},fnc:function(a){return"function"===typeof a},und:function(a){return"undefined"===typeof a},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return f.hex(a)||f.rgb(a)||f.hsl(a)}},y={},I=function(){function a(a,d,c){return(((1-3*c+3*d)*a+(3*c-6*d))*a+3*d)*a}return function(b,d,c,e){if(0<=b&&1>=b&&0<=c&&1>=c){var h=new Float32Array(11);if(b!==d||c!==e)for(var f=0;11>f;++f)h[f]=a(.1*
f,b,c);return function(f){if(b===d&&c===e||0===f||1===f)return f;for(var l=0,k=1;10!==k&&h[k]<=f;++k)l+=.1;--k;k=l+(f-h[k])/(h[k+1]-h[k])*.1;var n=3*(1-3*c+3*b)*k*k+2*(3*c-6*b)*k+3*b;if(.001<=n){for(l=0;4>l;++l){n=3*(1-3*c+3*b)*k*k+2*(3*c-6*b)*k+3*b;if(0===n)break;var m=a(k,b,c)-f;k-=m/n}f=k}else if(0===n)f=k;else{k=l;l+=.1;var p=0;do m=k+(l-k)/2,n=a(m,b,c)-f,0<n?l=m:k=m;while(1e-7<Math.abs(n)&&10>++p);f=m}return a(f,d,e)}}}}(),H=function(){var a="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),
b={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],z],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(a,b){return function(c){return 1-z(a,b)(1-c)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,
.265,1.55],function(a,b){return function(c){return.5>c?z(a,b)(2*c)/2:1-z(a,b)(-2*c+2)/2}}]},d={linear:[.25,.25,.75,.75]},c={},e;for(e in b)c.equation=e,b[c.equation].forEach(function(b){return function(c,e){d["ease"+b.equation+a[e]]=c}}(c)),c={equation:c.equation};return d}(),oa={css:function(a,b,d){return a.style[b]=d},attribute:function(a,b,d){return a.setAttribute(b,d)},object:function(a,b,d){return a[b]=d},transform:function(a,b,d,c,e){c.list.set(b,d);if(b===c.last||e){var f="";c.list.forEach(function(a,
b){f+=b+"("+a+") "});a.style.transform=f}}},u=[],Z=[],B,pa=function(){function a(){B=requestAnimationFrame(b)}function b(b){if(u.length){for(var c=0;c<u.length;){var d=u[c];d.paused?(d=u.indexOf(d),-1<d&&u.splice(d,1)):d.tick(b);c++}a()}else B=cancelAnimationFrame(B)}return a}();document.addEventListener("visibilitychange",function(){document.hidden?(u.forEach(function(a){return a.pause()}),Z=u.slice(0),u=[]):Z.forEach(function(a){return a.play()})});p.version="3.0.0";p.speed=1;p.running=u;p.remove=
function(a){a=V(a);for(var b=u.length;b--;){var d=u[b],c=d.animations,e=d.children;Y(a,c);for(var f=e.length;f--;){var l=e[f],n=l.animations;Y(a,n);n.length||l.children.length||e.splice(f,1)}c.length||e.length||d.pause()}};p.get=Q;p.path=function(a,b){var d=f.str(a)?J(a)[0]:a,c=b||100;return function(a){return{el:d,property:a,totalLength:T(d)*(c/100)}}};p.setDashoffset=function(a){var b=T(a);a.setAttribute("stroke-dasharray",b);return b};p.timeline=function(a){a=void 0===a?{}:a;var b=p(a);b.pause();
b.duration=0;b.add=function(d,c){function e(a){a.began=!0;a.completed=!0}b.children.forEach(e);var h=A(d,F(X,a));h.targets=h.targets||a.targets;d=b.duration;h.autoplay=!1;h.direction=b.direction;h.timelineOffset=f.und(c)?d:R(c,d);e(b);b.seek(h.timelineOffset);c=p(h);e(c);h=c.duration+h.timelineOffset;f.fnc(b.delay)&&(b.delay=c.delay);if(f.fnc(d)||h>d)b.duration=h;b.children.push(c);b.seek(0);b.reset();b.autoplay&&b.restart();return b};return b};p.easings=H;p.random=function(a,b){return Math.floor(Math.random()*
(b-a+1))+a};return p});